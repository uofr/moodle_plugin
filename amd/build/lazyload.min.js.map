{"version":3,"file":"lazyload.min.js","sources":["../src/lazyload.js"],"sourcesContent":["/**\n * A tool for sorting instances based on column header.\n *\n * @module moodle-report_quizoverview-sort\n */\n\n/**\n * @class M.report_quizoverview\n * @extends Base\n * @constructor\n */\n\ndefine(['jquery','core/ajax','core/notification'], function($, ajax,notification) {\n\n    var max = false;\n    var maxcount = 0;\n\n    //On scroll load next ten videos\n    function processScroll(){\n\n        //check if at max\n        if(!max){\n            //get current count of videos\n            var count = $('.kalvidassign_videocards').length;\n            var vidassignid = $(\"#mod_kalvidassign_gallery\").data(\"vid\");\n            //send ajax request\n            var args = {count: count, vidassignid: vidassignid};\n\n            // set ajax call\n            var ajaxCall = {\n                methodname: 'mod_kalvidassign_fetch_videos',\n                args: args,\n                fail: notification.exception\n            };\n\n            // initiate ajax call\n            var promise = ajax.call([ajaxCall]);\n            promise[0].done(function(response) {\n                //self.spinnerCheck(\"hide\");\n                maxcount = response.maxcount;\n                //check if no more videos\n                var count = $('.kalvidassign_videocards').length;\n\n                if(response.videocount > 0 && count < response.maxcount){\n\n                    maxcount = response.maxcount;\n                    //create each video template and\n                    //append to end of video section\n                    $.each(response.videos, function(index, value) {\n                        var videocard = '<div class=\"card m-3 kalvidassign_videocards\" style=\"width: 15rem;\">'+\n                                        '<img id=\"'+value.id+'\" class = \"card-img-top kalvidassign_thumbnail\" src=\"'+value.thumbnailUrl+'\">'+\n                                        '<div class=\"hide url\" data-value = '+value.url+' data-width = '+value.width+' data-height = '+value.height+'></div>'+\n                                        '<div class=\"card-body\">'+\n                                        ' <p>Creator: '+value.creator+'<p>'+\n                                            '<h5 class=\"card-title\"> <b>'+value.name+'</b></h5>'+\n                                        '</div>'+\n                                        '</div>';\n\n                        $(\"#mod_kalvidassign_gallery\").find(\".row\").append(videocard);\n                    });\n                }else{\n                    max =true;\n                    $(window).off('scroll');\n                }\n            }).fail(function() {\n                //self.spinnerCheck(\"hide\");\n            });\n        }else{\n            //unbind scroll\n            $(window).off('scroll');\n        }\n    }\n\n    function init() {\n        $(window).bind('scroll', processScroll);\n    }\n\n    return {\n        init: init\n    };\n});\n\n"],"names":["define","$","ajax","notification","max","processScroll","window","off","ajaxCall","methodname","args","count","length","vidassignid","data","fail","exception","call","done","response","maxcount","videocount","each","videos","index","value","videocard","id","thumbnailUrl","url","width","height","creator","name","find","append","init","bind"],"mappings":"AAYAA,mCAAO,CAAC,SAAS,YAAY,sBAAsB,SAASC,EAAGC,KAAKC,kBAE5DC,KAAM,WAIDC,mBAGDD,IAgDAH,EAAEK,QAAQC,IAAI,cAhDV,KAQAC,SAAW,CACXC,WAAY,gCACZC,KALO,CAACC,MAHAV,EAAE,4BAA4BW,OAGhBC,YAFRZ,EAAE,6BAA6Ba,KAAK,QAQlDC,KAAMZ,aAAaa,WAITd,KAAKe,KAAK,CAACT,WACjB,GAAGU,MAAK,SAASC,UAEVA,SAASC,aAEhBT,MAAQV,EAAE,4BAA4BW,OAEvCO,SAASE,WAAa,GAAKV,MAAQQ,SAASC,UAEhCD,SAASC,SAGpBnB,EAAEqB,KAAKH,SAASI,QAAQ,SAASC,MAAOC,WAChCC,UAAY,gFACYD,MAAME,GAAG,wDAAwDF,MAAMG,aADnF,wCAEsCH,MAAMI,IAAI,iBAAiBJ,MAAMK,MAAM,kBAAkBL,MAAMM,OAFrG,8CAIgBN,MAAMO,QAJtB,iCAKkCP,MAAMQ,KALxC,wBAShBhC,EAAE,6BAA6BiC,KAAK,QAAQC,OAAOT,gBAGvDtB,KAAK,EACLH,EAAEK,QAAQC,IAAI,cAEnBQ,MAAK,sBAaT,CACHqB,gBAJAnC,EAAEK,QAAQ+B,KAAK,SAAUhC"}