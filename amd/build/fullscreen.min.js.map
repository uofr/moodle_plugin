{"version":3,"file":"fullscreen.min.js","sources":["../src/fullscreen.js"],"sourcesContent":["/**\n * A tool for sorting instances based on column header.\n *\n * @module moodle-report_quizoverview-sort\n */\n\n/**\n * @class M.report_quizoverview\n * @extends Base\n * @constructor\n */\n\ndefine(['jquery','core/templates','core/ajax','core/notification', 'core/str'], function($, Templates, ajax,notification,Str) {\n\n    var MEDIABOX = function(allowcomments, allowlikes){\n        /*\n        * Variables accessible\n        * in the class\n        */\n        var vars = {\n            _sidebarwidth : 300,\n            _navbarheight : 60,\n            currentitem : null,\n            _allowcomments: true,\n            _allowlikes: true,\n        };\n\n        /*\n        * Can access this.method\n        * inside other methods using\n        * root.method()\n        */\n        var root = this;\n\n        /*\n        * Constructor\n        */\n        this.construct = function(allowcomments, allowlikes){\n            _allowlikes=allowlikes;\n            _allowcomments=allowcomments;\n            enable();\n            build();\n        };\n\n        var build = async function() {\n\n            //get variables together\n            var data = {\n                allowlikes:_allowlikes,\n                allowcomments:_allowcomments\n            };\n            //RENDER TEMPLATE\n            var template =  await render('mod_kalvidassign/sidebar', data);\n            $('body').append(template);\n\n            root.overlay = $('#mediabox-overlay');\n            root.mediabox = $('#mediabox');\n            root.navbar = $('#mediabox-navbar');\n            resizeoverlay();\n\n            root.album = $(\".kalvidassign_videocards\");\n\n            root.overlay.bind('click', function() {\n                stop();\n            });\n\n            $('#mediabox', '#mediabox-navbar, #mediabox-navbar-container').click(function() {\n                if (e.currentTarget.get('id') === 'mediabox-navbar-container') {\n                    return false;\n                }\n                stop();\n            });\n\n            //for lazy load to catch all newly added videos\n            $(window).scroll(function() {\n                enable();\n            });\n\n            $(window).resize(function() {\n                resizeoverlay();\n                repositionitem();\n            });\n\n            //collapse sidebar if on smaller device or screen size\n            if ($(window).width() < 400) {\n                if(!$(\"#mediabox\").hasClass(\"sidebarhidden\")){\n                    $(\"#mediabox\").addClass('sidebarhidden');\n                    $(\"#sidebar-actions\").addClass('mod-kalvidassign-sidebar-shrink');\n                    $(\"#mediabox-metainfo\").addClass('hide');\n                    $(\"#mediabox-social\").addClass('hide');\n                    $(\"#mediabox-comments\").addClass('hide');\n                    $(this).addClass('fa-plus').removeClass('fa-minus');\n                    resizeoverlay();\n                    repositionitem();\n                }\n             }\n             else {\n                if($(\"#mediabox\").hasClass(\"sidebarhidden\")){\n                    $(\"#mediabox\").removeClass('sidebarhidden');\n                    $(\"#sidebar-actions\").removeClass('mod-kalvidassign-sidebar-shrink');\n                    $(\"#mediabox-metainfo\").removeClass('hide');\n                    $(\"#mediabox-social\").removeClass('hide');\n                    $(\"#mediabox-comments\").removeClass('hide');\n                    $(this).addClass('fa-minus').removeClass('fa-minus');\n                    resizeoverlay();\n                    repositionitem();\n                }\n             }\n\n            // Sidebar hide/expand button.\n            $('#sidebar-actions .sidebartoggle').click(function() {\n                $(\"#mediabox\").toggleClass('sidebarhidden');\n                $(\"#sidebar-actions\").toggleClass('mod-kalvidassign-sidebar-shrink');\n                $(\"#mediabox-metainfo\").toggleClass('hide');\n                $(\"#mediabox-social\").toggleClass('hide');\n                $(\"#mediabox-comments\").toggleClass('hide');\n\n                if($(this).hasClass(\"fa-minus\")){\n                    $(this).addClass('fa-plus').removeClass('fa-minus');\n                }else{\n                    $(this).addClass('fa-minus').removeClass('fa-plus');\n                }\n                resizeoverlay();\n                repositionitem();\n            });\n\n            for (var i = 0; i < root.album.length; i++) {\n                var navitem = Y.Node.create('<div class=\"navitem\"></div>');\n                navitem.setAttribute('data-id', i);\n                var item = Y.Node.create('<img/>');\n                item.setAttribute('src', root.album[i].children[0].getAttribute('src'));\n                item.appendTo(navitem);\n\n                navitem.appendTo('#mediabox-navbar-container');\n            }\n            Y.delegate('click', function(e) {\n                e.preventDefault();\n                changeitem(e.currentTarget.getAttribute('data-id'));\n            }, '#mediabox-navbar', '.navitem');\n\n            if(_allowlikes){\n                // Like action.\n                $('#liked').click(function(){\n                    if ($('#liked').hasClass('fa-heart')) {\n                        likedbyme = 0;\n                        $('#liked').removeClass('fa-heart');\n                        $('#liked').addClass('fa-heart-o');\n                    }else{\n                        var likedbyme = 1;\n                        $('#liked').removeClass('fa-heart-o');\n                        $('#liked').addClass('fa-heart');\n                    }\n\n                    //send ajax request\n                    var args = {\n                        vidid: $(root.currentitem).attr('id'),\n                        liked: likedbyme};\n                    // set ajax call\n                    var ajaxCall = {\n                        methodname: 'mod_kalvidassign_update_likes',\n                        args: args,\n                        fail: notification.exception\n                    };\n\n                    // initiate ajax call\n                    var promise = ajax.call([ajaxCall]);\n                    promise[0].done(function(response) {\n                        if(response.result){\n                        $hidden = $(root.currentitem).find(\".url\");\n                        $hidden.data(\"liked\",likedbyme);\n                        }\n                    });\n                });\n            }\n\n            $( \"#mediabox-metainfo a\" ).click(function() {\n                if($(this).find(\"i\").hasClass(\"fa-caret-right\")){\n                    $(this).find(\"i\").addClass('fa-caret-down').removeClass('fa-caret-right');\n                }else{\n                    $(this).find(\"i\").addClass('fa-caret-right').removeClass('fa-caret-down');\n                }\n            });\n\n            $('#previous').click(function() {\n                if (root.currentitemindex === 0) {\n                    changeitem(root.album.length - 1);\n                } else {\n                    changeitem(root.currentitemindex - 1);\n                }\n                return false;\n            });\n\n            $('#next').click(function() {\n                if (root.currentitemindex === root.album.length - 1) {\n                    changeitem(0);\n                } else {\n                    changeitem(root.currentitemindex + 1);\n                }\n                return false;\n            });\n\n            $('#sidebar-actions .mbclose').click(function() {\n                stop();\n                return false;\n            });\n        };\n\n       var updatenavbarselection = function(itemnumber) {\n            var current = root.navbar.one('.navitem.current');\n            if (current) {\n                current.removeClass('current');\n            }\n            root.navbar.one('.navitem[data-id=\"' + itemnumber + '\"]').addClass('current');\n\n            // Let's keep the currently displayed image centered in the navbar.\n            var navbar = $('#mediabox-navbar');\n            var currentitem = $('#mediabox-navbar-container .current');\n            var itemwidth = currentitem.get('clientWidth') + 2 * parseInt(currentitem.css('margin-left'), 10);\n            var items = $('#mediabox-navbar-container .navitem');\n            var index = items.index(currentitem);\n\n            var navwidth = navbar.get('clientWidth');\n            var margin = (navwidth / 2) - (itemwidth / 2) - (index * itemwidth);\n\n            $('#mediabox-navbar-container').css('margin-left', margin + 'px');\n        };\n\n        var changeitem = async function(itemnumber) {\n            if (root.currentitemindex === itemnumber) {\n                return;\n            }\n            var content = $('#mediabox-content');\n            var playerinfo = $(root.album[itemnumber]).find(\".url\");\n            content.empty();\n\n            updatenavbarselection(itemnumber);\n\n            root.currentitemindex = parseInt(itemnumber, 10);\n            root.currentitem = root.album[itemnumber];\n\n            //remove current iframe\n            $(\"#mediabox-content\").find(\"iframe\").remove();\n\n            //update with new iframe\n            url = $(playerinfo).data(\"value\");\n            width= $(playerinfo).data(\"width\");\n            height = $(playerinfo).data(\"height\");\n\n            var player = '<div class = \"kaltura-player-container\" >'\n            +'<iframe class=\"kaltura-player-iframe\" src=\"'+url+'\" allowfullscreen=\"true\" allow=\"autoplay *; fullscreen *; encrypted-media *; camera *; microphone *;\" frameborder=\"0\" height=\"402\" width=\"608\" ></iframe>'\n            +'</div>';\n\n            //add player to mediabox\n            $(\"#mediabox-content\").html(player);\n\n            //get metainfo and sidebar info\n            var creator = $(playerinfo).parent().find(\"#thumbcreator\").text();\n            var title = $(playerinfo).parent().find(\"#thumbtitle\").text();\n            var liked = $(playerinfo).data(\"liked\");\n            var totallikes = $(playerinfo).data(\"totallikes\");\n            var commentid = $(playerinfo).data(\"comment\");\n            var commentbox = $(\"#mediabox-comments\");\n            var contextid = $(playerinfo).data(\"context\");\n            var courseid = $(playerinfo).data(\"course\");\n\n            $(\"#creators\").text(creator);\n            $(\"#caption\").text(\"Caption: \"+title);\n            $(\"#liketally\").empty();\n\n            if(liked==0){\n                $(\"#liked\").removeClass(\"fa-heart\");\n                $(\"#liked\").addClass(\"fa-heart-o\");\n                $(\"#liketally\").text(' Liked by: '+totallikes+\" others\");\n            }else{\n                $(\"#liked\").removeClass(\"fa-heart-o\");\n                $(\"#liked\").addClass(\"fa-heart\");\n                $(\"#liketally\").text('Liked by: you, '+totallikes+\" others\");\n            }\n            $(\"#caption\").text(\"Caption: \"+title);\n\n            //Fetch Comments\n            if(_allowcomments){\n                await fetchcomments($(root.album[itemnumber]).attr('id'), contextid, commentid, courseid);\n\n                var data = {\n                    linktext: \"Comments\",\n                    cid : commentid,\n                    contextid: contextid,\n                    notoggle:false,\n                    pix:true,\n                    displaytotalcount:true,\n                    count:0,\n                    //\"template\" : \"gallery\",\n                    canpost:true,\n                    displaycancel:true,\n                    itemid:$(root.album[itemnumber]).attr('id'),\n                    commentarea:\"item\",\n                    component : 'mod_kalvidassign',\n                    autostart : true,\n                    fullwidth:false\n                };\n\n                //RENDER TEMPLATE\n                var template =  await render('mod_kalvidassign/comment_area', data);\n                $(commentbox).html(template);\n                $(commentbox).find(\".comment-ctrl\").show();\n                $( \".comment-link\" ).click(function() {\n                    if($(this).find(\"i\").hasClass(\"fa-caret-right\")){\n                        $(this).find(\"i\").addClass('fa-caret-down').removeClass('fa-caret-right');\n                    }else{\n                        $(this).find(\"i\").addClass('fa-caret-right').removeClass('fa-caret-down');\n                    }\n                });\n\n                Str.get_strings([\n                    { key: 'addcomment', component: 'moodle' },\n                    { key: 'comments', component: 'moodle' },\n                    { key: 'commentscount', component: 'moodle' },\n                    { key: 'commentsrequirelogin', component: 'moodle' },\n                    { key: 'deletecommentbyon', component: 'moodle' },\n                ]).then(function() {\n                    // Kick off when strings are loaded.\n                    Y.use('core_comment', function(Y) {\n                    M.core_comment.init(Y, {\n                            client_id: data.cid,\n                            commentarea:data.commentarea,\n                            itemid: data.itemid,\n                            area:'item',\n                            page: 0,\n                            courseid: courseid,\n                            contextid: data.contextid,\n                            component: data.component,\n                            notoggle: false,\n                            autostart: true\n                        });\n                    });\n                });\n            }\n        };\n\n        var fetchcomments = async function(itemid, contextid, commentid, courseid){\n            //send ajax request\n            var args = {\n                itemid: itemid,\n                contextid: contextid,\n                clientid: commentid,\n                courseid: courseid,\n            };\n\n             // set ajax call\n            var ajaxCall = {\n                methodname: 'mod_kalvidassign_get_comments',\n                args: args,\n                fail: notification.exception\n            };\n\n            // initiate ajax call\n            var promise = ajax.call([ajaxCall]);\n            promise[0].done(function(response) {\n                if(response.result){\n                    $.each( response.comments, function( key, value ) {\n                       $('#comment-list-'+commentid).append(value.html);\n                    });\n\n                    $('#comment-link-count-'+commentid).text(\"(\"+response.count+\")\");\n                }\n            });\n        };\n\n        var enable = function() {\n\n            var mediaboxtarget = '.kalvidassign_videocards';\n            return $('body').find(mediaboxtarget).bind('click', function(e) {\n                e.preventDefault();\n                start(e.currentTarget);\n                return false;\n            });\n        };\n\n        var repositionitem = function(width, height) {\n\n            var offsetTop, offsetLeft;\n            var newwidth = '';\n            var newheight = '';\n            var content = $('#mediabox-content');\n            var innercontent = $('.kaltura-player-container');\n            var sidebarwidth = $(\"#mediabox-sidebar\").width();\n\n            if (root.mediabox.hasClass('sidebarhidden')) {\n                sidebarwidth = 0;\n            }\n\n            if (typeof innercontent === \"undefined\") {\n                return;\n            }\n\n            if (typeof width === \"undefined\") {\n                width= $(innercontent).find(\"iframe\").width();\n                height = $(innercontent).find(\"iframe\").height();\n            }\n\n            var winwidth = $('body').width();\n            var winheight = $('body').height();\n\n            var maxwidth = winwidth - sidebarwidth;\n            var maxheight = winheight - vars._navbarheight;\n\n            if (width > maxwidth || height > maxheight) {\n                if ((width / maxwidth) > (height / maxheight)) {\n                    newwidth = maxwidth;\n                    newheight = parseInt(height / (width / maxwidth), 10);\n                    offsetLeft = 0;\n                    offsetTop = (winheight - newheight) / 2;\n                } else {\n                    newheight = maxheight;\n                    newwidth = parseInt(width / (height / maxheight), 10);\n                    offsetTop = 0;\n                    offsetLeft = (winwidth - newwidth - sidebarwidth) / 2;\n                }\n                newwidth += 'px';\n                newheight += 'px';\n            } else {\n                offsetLeft = (winwidth - width - sidebarwidth) / 2;\n                offsetTop = (winheight - height - vars._navbarheight) / 2;\n            }\n            innercontent.css('width', newwidth);\n            innercontent.css('height', newheight);\n\n            content.css('top', offsetTop + 'px');\n            content.css('left', offsetLeft + 'px');\n        };\n\n        var resizeoverlay = function() {\n            var viewportwidth = screen.width;\n            var viewportheight = screen.height;\n            root.overlay.css('width', viewportwidth);\n            root.overlay.css('height', viewportheight);\n        };\n\n        var start = function(target) {\n\n            $('body').addClass('noscroll mediaboxactive');\n\n            root.overlay.css('display', 'block');\n            root.mediabox.css('display', 'block');\n\n            //get variables\n            url = $(target).find(\".url\").data(\"value\");\n            width= $(target).find(\".url\").data(\"width\");\n            height = $(target).find(\".url\").data(\"height\");\n\n\n            var player = '<div class = \"kaltura-player-container\">'\n            +'<iframe  class=\"kaltura-player-iframe\" src=\"'+url+'\" allowfullscreen=\"true\" allow=\"autoplay *; fullscreen *; encrypted-media *; camera *; microphone *;\" frameborder=\"0\"  height=\"402\" width=\"608\" ></iframe>'\n            +'</div>';\n\n            //add player to mediabox\n            $(\"#mediabox-content\").html(player);\n\n            resizeoverlay();\n            repositionitem();\n\n            var itemnumber = 0;\n\n            for (var i = 0; i < root.album.length; i++) {\n                if (root.album[i].getAttribute('id') === target.getAttribute('id')) {\n                    itemnumber = i;\n                }\n            }\n\n            if (root.currentitemindex !== itemnumber) {\n                $('#mediabox-content').empty();\n            }\n\n            setfullscreenimg();\n            changeitem(itemnumber);\n        };\n\n\n        var setfullscreenimg = function() {\n            if (!$('#mediabox-sidebar-actions .fullscreen')) {\n                return;\n            }\n            var imgurl = M.util.image_url('fullscreen', 'mod_mediagallery');\n            if (screenfull.isFullscreen) {\n                imgurl = M.util.image_url('fullscreenexit', 'mod_mediagallery');\n            }\n            $('#mediabox-sidebar-actions .fullscreen').attr('src', imgurl);\n        };\n\n        var stop = function() {\n            if (screenfull.isFullscreen) {\n                screenfull.exit();\n            }\n            $('body').removeClass('noscroll mediaboxactive');\n            root.overlay.css('display', '');\n            root.mediabox.css('display', '');\n        };\n\n         /**\n         * Update the modal body using given template and data.\n         *\n         * @method render\n         * @param {String} template - The name of the template to render.\n         * @param {Object} data - Data for template.\n         * @param {Object} breadcrumbData - Data required for rending breadcrumbs.\n         */\n        var render = async function(template,data) {\n            const renderPromise = await Templates.render(template, data);\n            return renderPromise;\n        };\n\n    /*}, {\n        NAME : 'moodle-mod_mediagallery-mediabox',\n        ATTRS : {\n            enablecomments: {\n                value : true,\n                validator: function(val) {\n                    return Y.Lang.isBoolean(val);\n                }\n            },\n            enablelikes: {\n                value : true,\n                validator: function(val) {\n                    return Y.Lang.isBoolean(val);\n                }\n            },\n            metainfouri: {\n                value : '',\n                validator: function(val) {\n                    return Y.Lang.isString(val);\n                }\n            },\n            dataidfield: {\n                value : 'data-id',\n                validator: function(val) {\n                    return Y.Lang.isString(val);\n                }\n            },\n            metainfodata: {\n                value: {},\n                validator: function(val) {\n                    return Y.Lang.isObject(val);\n                }\n            }\n        }*/\n    /*\n     * Pass options when class instantiated\n     */\n        root.construct(allowcomments, allowlikes);\n    };\n\n    var init = function(allowcomments, allowlikes) {\n        return new MEDIABOX(allowcomments, allowlikes);\n    };\n\n    return {\n        init: init\n    };\n});\n\n\n\n\n\n"],"names":["define","$","Templates","ajax","notification","Str","MEDIABOX","allowcomments","allowlikes","vars","root","this","construct","_allowlikes","_allowcomments","enable","build","data","render","template","append","overlay","mediabox","navbar","resizeoverlay","album","bind","stop","click","e","currentTarget","get","window","scroll","resize","repositionitem","width","hasClass","addClass","removeClass","toggleClass","i","length","navitem","Y","Node","create","setAttribute","item","children","getAttribute","appendTo","delegate","preventDefault","changeitem","likedbyme","ajaxCall","methodname","args","vidid","currentitem","attr","liked","fail","exception","call","done","response","result","$hidden","find","currentitemindex","updatenavbarselection","itemnumber","current","one","itemwidth","parseInt","css","index","margin","content","playerinfo","empty","remove","url","height","player","html","creator","parent","text","title","totallikes","commentid","commentbox","contextid","courseid","fetchcomments","linktext","cid","notoggle","pix","displaytotalcount","count","canpost","displaycancel","itemid","commentarea","component","autostart","fullwidth","show","get_strings","key","then","use","M","core_comment","init","client_id","area","page","clientid","each","comments","value","start","offsetTop","offsetLeft","newwidth","newheight","innercontent","sidebarwidth","winwidth","winheight","maxwidth","maxheight","viewportwidth","screen","viewportheight","target","setfullscreenimg","imgurl","util","image_url","screenfull","isFullscreen","exit","renderPromise"],"mappings":"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"}