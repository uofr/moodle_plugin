{"version":3,"file":"fullscreen.min.js","sources":["../src/fullscreen.js"],"sourcesContent":["/**\n * A tool for sorting instances based on column header.\n *\n * @module moodle-report_quizoverview-sort\n */\n\n/**\n * @class M.report_quizoverview\n * @extends Base\n * @constructor\n */\n\ndefine(['jquery','core/templates','core/ajax','core/notification', 'core/str'], function($, Templates, ajax,notification,Str) {\n\n    var MEDIABOX = function(allowcomments, allowlikes){\n        /*\n        * Variables accessible\n        * in the class\n        */\n        var vars = {\n            _sidebarwidth : 300,\n            _navbarheight : 60,\n            currentitem : null,\n            _allowcomments: true,\n            _allowlikes: true,\n            _contextid: 0,\n            _cmid: 0,\n            _courseid: 0,\n        };\n\n        /*\n        * Can access this.method\n        * inside other methods using\n        * root.method()\n        */\n        var root = this;\n\n        /*\n        * Constructor\n        */\n        this.construct = function(allowcomments, allowlikes){\n\n            _allowlikes=allowlikes;\n            _allowcomments=allowcomments;\n            _contextid= $('#mod_kalvidassign_gallery').data(\"context\");\n            _cmid= $('#mod_kalvidassign_gallery').data(\"cmid\");\n            _courseid= $('#mod_kalvidassign_gallery').data(\"course\");\n\n            enable();\n            build();\n        };\n\n        var build = async function() {\n\n            //get variables together\n            var data = {\n                allowlikes:_allowlikes,\n                allowcomments:_allowcomments\n            };\n            //RENDER TEMPLATE\n            var template =  await render('mod_kalvidassign/sidebar', data);\n            $('body').append(template);\n\n            root.overlay = $('#mediabox-overlay');\n            root.mediabox = $('#mediabox');\n            root.navbar = $('#mediabox-navbar');\n            resizeoverlay();\n\n            root.album = $(\".kalvidassign_videocards\");\n\n            root.overlay.bind('click', function() {\n                stop();\n            });\n\n            $('#mediabox', '#mediabox-navbar, #mediabox-navbar-container').click(function() {\n                if (e.currentTarget.get('id') === 'mediabox-navbar-container') {\n                    return false;\n                }\n                stop();\n            });\n\n\n            //for lazy load to catch all newly added videos\n            $(window).scroll(function() {\n                enable();\n            });\n\n            $(window).resize(function() {\n                resizeoverlay();\n                repositionitem();\n            });\n\n            //collapse sidebar if on smaller device or screen size\n            if ($(window).width() < 400) {\n                if(!$(\"#mediabox\").hasClass(\"sidebarhidden\")){\n                    $(\"#mediabox\").addClass('sidebarhidden');\n                    $(\"#sidebar-actions\").addClass('mod-kalvidassign-sidebar-shrink');\n                    $(\"#mediabox-metainfo\").addClass('hide');\n                    $(\"#mediabox-social\").addClass('hide');\n                    $(\"#mediabox-comments\").addClass('hide');\n                    $(this).addClass('fa-plus').removeClass('fa-minus');\n                    resizeoverlay();\n                    repositionitem();\n                }\n             }\n             else {\n                if($(\"#mediabox\").hasClass(\"sidebarhidden\")){\n                    $(\"#mediabox\").removeClass('sidebarhidden');\n                    $(\"#sidebar-actions\").removeClass('mod-kalvidassign-sidebar-shrink');\n                    $(\"#mediabox-metainfo\").removeClass('hide');\n                    $(\"#mediabox-social\").removeClass('hide');\n                    $(\"#mediabox-comments\").removeClass('hide');\n                    $(this).addClass('fa-minus').removeClass('fa-minus');\n                    resizeoverlay();\n                    repositionitem();\n                }\n             }\n\n            // Sidebar hide/expand button.\n            $('#sidebar-actions .sidebartoggle').click(function() {\n                $(\"#mediabox\").toggleClass('sidebarhidden');\n                $(\"#sidebar-actions\").toggleClass('mod-kalvidassign-sidebar-shrink');\n                $(\"#mediabox-metainfo\").toggleClass('hide');\n                $(\"#mediabox-social\").toggleClass('hide');\n                $(\"#mediabox-comments\").toggleClass('hide');\n\n                if($(this).hasClass(\"fa-minus\")){\n                    $(this).addClass('fa-plus').removeClass('fa-minus');\n                }else{\n                    $(this).addClass('fa-minus').removeClass('fa-plus');\n                }\n                resizeoverlay();\n                repositionitem();\n            });\n\n            for (var i = 0; i < root.album.length; i++) {\n                var navitem = Y.Node.create('<div class=\"navitem\"></div>');\n                navitem.setAttribute('data-id', i);\n                var item = Y.Node.create('<img/>');\n                item.setAttribute('src', root.album[i].children[0].getAttribute('src'));\n                item.appendTo(navitem);\n\n                navitem.appendTo('#mediabox-navbar-container');\n            }\n            Y.delegate('click', function(e) {\n                e.preventDefault();\n                changeitem(e.currentTarget.getAttribute('data-id'));\n            }, '#mediabox-navbar', '.navitem');\n\n            if(_allowlikes){\n                // Like action.\n                $('#liked').click(function(){\n                    if ($('#liked').hasClass('fa-heart')) {\n                        likedbyme = 0;\n                        $('#liked').removeClass('fa-heart');\n                        $('#liked').addClass('fa-heart-o');\n                    }else{\n                        var likedbyme = 1;\n                        $('#liked').removeClass('fa-heart-o');\n                        $('#liked').addClass('fa-heart');\n                    }\n\n                    //send ajax request\n                    var args = {\n                        vidid: $(root.currentitem).attr('id'),\n                        liked: likedbyme};\n                    // set ajax call\n                    var ajaxCall = {\n                        methodname: 'mod_kalvidassign_update_likes',\n                        args: args,\n                        fail: notification.exception\n                    };\n\n                    // initiate ajax call\n                    var promise = ajax.call([ajaxCall]);\n                    promise[0].done(function(response) {\n                        if(response.result){\n                        $hidden = $(root.currentitem).find(\".url\");\n                        $hidden.data(\"liked\",likedbyme);\n                        }\n                    });\n                });\n            }\n\n            $( \"#mediabox-metainfo a\" ).click(function() {\n                if($(this).find(\"i\").hasClass(\"fa-caret-right\")){\n                    $(this).find(\"i\").addClass('fa-caret-down').removeClass('fa-caret-right');\n                }else{\n                    $(this).find(\"i\").addClass('fa-caret-right').removeClass('fa-caret-down');\n                }\n            });\n\n            $('#previous').click(function() {\n                if (root.currentitemindex === 0) {\n                    changeitem(root.album.length - 1);\n                } else {\n                    changeitem(root.currentitemindex - 1);\n                }\n                return false;\n            });\n\n            $('#next').click(function() {\n                if (root.currentitemindex === root.album.length - 1) {\n                    changeitem(0);\n                } else {\n                    changeitem(root.currentitemindex + 1);\n                }\n                return false;\n            });\n\n            $('#sidebar-actions .mbclose').click(function() {\n                stop();\n                return false;\n            });\n\n            //if more videos are added via lazyload then update alum and click events\n            $(\"#mod_kalvidassign_gallery\").bind(\"DOMNodeInserted\",function(){\n                root.album = $(\".kalvidassign_videocards\");\n                enable();\n            });\n\n        };\n\n       var updatenavbarselection = function(itemnumber) {\n            var current = root.navbar.one('.navitem.current');\n            if (current) {\n                current.removeClass('current');\n            }\n            root.navbar.one('.navitem[data-id=\"' + itemnumber + '\"]').addClass('current');\n\n            // Let's keep the currently displayed image centered in the navbar.\n            var navbar = $('#mediabox-navbar');\n            var currentitem = $('#mediabox-navbar-container .current');\n            var itemwidth = currentitem.get('clientWidth') + 2 * parseInt(currentitem.css('margin-left'), 10);\n            var items = $('#mediabox-navbar-container .navitem');\n            var index = items.index(currentitem);\n\n            var navwidth = navbar.get('clientWidth');\n            var margin = (navwidth / 2) - (itemwidth / 2) - (index * itemwidth);\n\n            $('#mediabox-navbar-container').css('margin-left', margin + 'px');\n        };\n\n        var changeitem = async function(itemnumber) {\n            if (root.currentitemindex === itemnumber) {\n                return;\n            }\n            var content = $('#mediabox-content');\n            var playerinfo = $(root.album[itemnumber]).find(\".url\");\n            content.empty();\n\n            updatenavbarselection(itemnumber);\n\n            root.currentitemindex = parseInt(itemnumber, 10);\n            root.currentitem = root.album[itemnumber];\n\n            //remove current iframe\n            $(\"#mediabox-content\").find(\"iframe\").remove();\n\n            //update with new iframe\n            url = $(playerinfo).data(\"value\");\n            width= $(playerinfo).data(\"width\");\n            height = $(playerinfo).data(\"height\");\n\n            var player = '<div class = \"kaltura-player-container\" >'\n            +'<iframe class=\"kaltura-player-iframe\" src=\"'+url+'\" allowfullscreen=\"true\" allow=\"autoplay *; fullscreen *; encrypted-media *; camera *; microphone *;\" frameborder=\"0\" height=\"402\" width=\"608\" ></iframe>'\n            +'</div>';\n\n            //add player to mediabox\n            $(\"#mediabox-content\").html(player);\n\n            //get metainfo and sidebar info\n            var creator = $(playerinfo).parent().find(\"#thumbcreator\").text();\n            var title = $(playerinfo).parent().find(\"#thumbtitle\").text();\n            var liked = $(playerinfo).data(\"liked\");\n            var totallikes = $(playerinfo).data(\"totallikes\");\n            var commentid = $(playerinfo).data(\"comment\");\n            var commentbox = $(\"#mediabox-comments\");\n\n            $(\"#creators\").text(creator);\n            $(\"#caption\").text(\"Caption: \"+title);\n            $(\"#liketally\").empty();\n\n            var totaltext= \" others\";\n            if(totallikes==1){\n                totaltext = \" other\";\n            }\n\n            if(liked==0){\n                $(\"#liked\").removeClass(\"fa-heart\");\n                $(\"#liked\").addClass(\"fa-heart-o\");\n                $(\"#liketally\").text(' Liked by: '+totallikes+totaltext);\n            }else{\n                $(\"#liked\").removeClass(\"fa-heart-o\");\n                $(\"#liked\").addClass(\"fa-heart\");\n                $(\"#liketally\").text('Liked by: you, '+totallikes+totaltext);\n            }\n            $(\"#caption\").text(\"Caption: \"+title);\n\n            //Fetch Comments\n            if(_allowcomments){\n                await fetchcomments($(root.album[itemnumber]).attr('id'), commentid);\n\n                var data = {\n                    linktext: \"Comments\",\n                    cid : commentid,\n                    contextid: _contextid,\n                    notoggle:false,\n                    pix:true,\n                    displaytotalcount:true,\n                    count:0,\n                    //\"template\" : \"gallery\",\n                    canpost:true,\n                    displaycancel:true,\n                    itemid:$(root.album[itemnumber]).attr('id'),\n                    commentarea:\"item\",\n                    component : 'mod_kalvidassign',\n                    autostart : true,\n                    fullwidth:false\n                };\n\n                //RENDER TEMPLATE\n                var template =  await render('mod_kalvidassign/comment_area', data);\n                $(commentbox).html(template);\n                $(commentbox).find(\".comment-ctrl\").show();\n                $( \".comment-link\" ).click(function() {\n                    if($(this).find(\"i\").hasClass(\"fa-caret-right\")){\n                        $(this).find(\"i\").addClass('fa-caret-down').removeClass('fa-caret-right');\n                    }else{\n                        $(this).find(\"i\").addClass('fa-caret-right').removeClass('fa-caret-down');\n                    }\n                });\n\n                Str.get_strings([\n                    { key: 'addcomment', component: 'moodle' },\n                    { key: 'comments', component: 'moodle' },\n                    { key: 'commentscount', component: 'moodle' },\n                    { key: 'commentsrequirelogin', component: 'moodle' },\n                    { key: 'deletecommentbyon', component: 'moodle' },\n                ]).then(function() {\n                    // Kick off when strings are loaded.\n                    Y.use('core_comment', function(Y) {\n                    M.core_comment.init(Y, {\n                            client_id: data.cid,\n                            commentarea:data.commentarea,\n                            itemid: data.itemid,\n                            area:'item',\n                            page: 0,\n                            courseid: _courseid,\n                            contextid: _contextid,\n                            component: data.component,\n                            notoggle: false,\n                            autostart: true\n                        });\n                    });\n                });\n            }\n        };\n\n        var fetchcomments = async function(itemid, commentid){\n            //send ajax request\n            var args = {\n                itemid: itemid,\n                contextid: _contextid,\n                clientid: commentid,\n                courseid: _courseid,\n            };\n\n             // set ajax call\n            var ajaxCall = {\n                methodname: 'mod_kalvidassign_get_comments',\n                args: args,\n                fail: notification.exception\n            };\n\n            // initiate ajax call\n            var promise = ajax.call([ajaxCall]);\n            promise[0].done(function(response) {\n                if(response.result){\n                    $.each( response.comments, function( key, value ) {\n                       $('#comment-list-'+commentid).append(value.html);\n                    });\n\n                    $('#comment-link-count-'+commentid).text(\"(\"+response.count+\")\");\n                }\n            });\n        };\n\n        var enable = function() {\n\n            var mediaboxtarget = '.kalvidassign_videocards';\n            return $('body').find(mediaboxtarget).bind('click', function(e) {\n                e.preventDefault();\n                start(e.currentTarget);\n                return false;\n            });\n        };\n\n        var repositionitem = function(width, height) {\n\n            var offsetTop, offsetLeft;\n            var newwidth = '';\n            var newheight = '';\n            var content = $('#mediabox-content');\n            var innercontent = $('.kaltura-player-container');\n            var sidebarwidth = $(\"#mediabox-sidebar\").width();\n\n            if (root.mediabox.hasClass('sidebarhidden')) {\n                sidebarwidth = 0;\n            }\n\n            if (typeof innercontent === \"undefined\") {\n                return;\n            }\n\n            if (typeof width === \"undefined\") {\n                width= $(innercontent).find(\"iframe\").width();\n                height = $(innercontent).find(\"iframe\").height();\n            }\n\n            var winwidth = $('body').width();\n            var winheight = $('body').height();\n\n            var maxwidth = winwidth - sidebarwidth;\n            var maxheight = winheight - vars._navbarheight;\n\n            if (width > maxwidth || height > maxheight) {\n                if ((width / maxwidth) > (height / maxheight)) {\n                    newwidth = maxwidth;\n                    newheight = parseInt(height / (width / maxwidth), 10);\n                    offsetLeft = 0;\n                    offsetTop = (winheight - newheight) / 2;\n                } else {\n                    newheight = maxheight;\n                    newwidth = parseInt(width / (height / maxheight), 10);\n                    offsetTop = 0;\n                    offsetLeft = (winwidth - newwidth - sidebarwidth) / 2;\n                }\n                newwidth += 'px';\n                newheight += 'px';\n            } else {\n                offsetLeft = (winwidth - width - sidebarwidth) / 2;\n                offsetTop = (winheight - height - vars._navbarheight) / 2;\n            }\n            innercontent.css('width', newwidth);\n            innercontent.css('height', newheight);\n\n            content.css('top', offsetTop + 'px');\n            content.css('left', offsetLeft + 'px');\n        };\n\n        var resizeoverlay = function() {\n            var viewportwidth = screen.width;\n            var viewportheight = screen.height;\n            root.overlay.css('width', viewportwidth);\n            root.overlay.css('height', viewportheight);\n        };\n\n        var start = function(target) {\n\n            $('body').addClass('noscroll mediaboxactive');\n\n            root.overlay.css('display', 'block');\n            root.mediabox.css('display', 'block');\n\n            //get variables\n            url = $(target).find(\".url\").data(\"value\");\n            width= $(target).find(\".url\").data(\"width\");\n            height = $(target).find(\".url\").data(\"height\");\n\n\n            var player = '<div class = \"kaltura-player-container\">'\n            +'<iframe  class=\"kaltura-player-iframe\" src=\"'+url+'\" allowfullscreen=\"true\" allow=\"autoplay *; fullscreen *; encrypted-media *; camera *; microphone *;\" frameborder=\"0\"  height=\"402\" width=\"608\" ></iframe>'\n            +'</div>';\n\n            //add player to mediabox\n            $(\"#mediabox-content\").html(player);\n\n            resizeoverlay();\n            repositionitem();\n\n            var itemnumber = 0;\n\n            for (var i = 0; i < root.album.length; i++) {\n                if (root.album[i].getAttribute('id') === target.getAttribute('id')) {\n                    itemnumber = i;\n                }\n            }\n\n            if (root.currentitemindex !== itemnumber) {\n                $('#mediabox-content').empty();\n            }\n\n            setfullscreenimg();\n            changeitem(itemnumber);\n        };\n\n\n        var setfullscreenimg = function() {\n            if (!$('#mediabox-sidebar-actions .fullscreen')) {\n                return;\n            }\n            var imgurl = M.util.image_url('fullscreen', 'mod_mediagallery');\n            if (screenfull.isFullscreen) {\n                imgurl = M.util.image_url('fullscreenexit', 'mod_mediagallery');\n            }\n            $('#mediabox-sidebar-actions .fullscreen').attr('src', imgurl);\n        };\n\n        var stop = function() {\n            if (screenfull.isFullscreen) {\n                screenfull.exit();\n            }\n            $('body').removeClass('noscroll mediaboxactive');\n            root.overlay.css('display', '');\n            root.mediabox.css('display', '');\n        };\n\n         /**\n         * Update the modal body using given template and data.\n         *\n         * @method render\n         * @param {String} template - The name of the template to render.\n         * @param {Object} data - Data for template.\n         * @param {Object} breadcrumbData - Data required for rending breadcrumbs.\n         */\n        var render = async function(template,data) {\n            const renderPromise = await Templates.render(template, data);\n            return renderPromise;\n        };\n\n    /*}, {\n        NAME : 'moodle-mod_mediagallery-mediabox',\n        ATTRS : {\n            enablecomments: {\n                value : true,\n                validator: function(val) {\n                    return Y.Lang.isBoolean(val);\n                }\n            },\n            enablelikes: {\n                value : true,\n                validator: function(val) {\n                    return Y.Lang.isBoolean(val);\n                }\n            },\n            metainfouri: {\n                value : '',\n                validator: function(val) {\n                    return Y.Lang.isString(val);\n                }\n            },\n            dataidfield: {\n                value : 'data-id',\n                validator: function(val) {\n                    return Y.Lang.isString(val);\n                }\n            },\n            metainfodata: {\n                value: {},\n                validator: function(val) {\n                    return Y.Lang.isObject(val);\n                }\n            }\n        }*/\n    /*\n     * Pass options when class instantiated\n     */\n        root.construct(allowcomments, allowlikes);\n    };\n\n    var init = function(allowcomments, allowlikes) {\n        return new MEDIABOX(allowcomments, allowlikes);\n    };\n\n    return {\n        init: init\n    };\n});\n\n\n\n\n\n"],"names":["define","$","Templates","ajax","notification","Str","MEDIABOX","allowcomments","allowlikes","vars","root","this","construct","_allowlikes","_allowcomments","_contextid","data","_cmid","_courseid","enable","build","render","template","append","overlay","mediabox","navbar","resizeoverlay","album","bind","stop","click","e","currentTarget","get","window","scroll","resize","repositionitem","width","hasClass","addClass","removeClass","toggleClass","i","length","navitem","Y","Node","create","setAttribute","item","children","getAttribute","appendTo","delegate","preventDefault","changeitem","likedbyme","ajaxCall","methodname","args","vidid","currentitem","attr","liked","fail","exception","call","done","response","result","$hidden","find","currentitemindex","updatenavbarselection","itemnumber","current","one","itemwidth","parseInt","css","index","margin","content","playerinfo","empty","remove","url","height","player","html","creator","parent","text","title","totallikes","commentid","commentbox","totaltext","fetchcomments","linktext","cid","contextid","notoggle","pix","displaytotalcount","count","canpost","displaycancel","itemid","commentarea","component","autostart","fullwidth","show","get_strings","key","then","use","M","core_comment","init","client_id","area","page","courseid","clientid","each","comments","value","start","offsetTop","offsetLeft","newwidth","newheight","innercontent","sidebarwidth","winwidth","winheight","maxwidth","maxheight","viewportwidth","screen","viewportheight","target","setfullscreenimg","imgurl","util","image_url","screenfull","isFullscreen","exit","renderPromise"],"mappings":"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"}